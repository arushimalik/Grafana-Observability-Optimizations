{"version":3,"file":"DataLinksListItem.js","sources":["../../../../../src/components/DataLinks/DataLinksInlineEditor/DataLinksListItem.tsx"],"sourcesContent":["import { css, cx } from '@emotion/css';\nimport { Draggable } from '@hello-pangea/dnd';\n\nimport { DataFrame, DataLink, GrafanaTheme2 } from '@grafana/data';\n\nimport { useStyles2 } from '../../../themes';\nimport { isCompactUrl } from '../../../utils';\nimport { FieldValidationMessage } from '../../Forms/FieldValidationMessage';\nimport { Icon } from '../../Icon/Icon';\nimport { IconButton } from '../../IconButton/IconButton';\n\nexport interface DataLinksListItemProps {\n  index: number;\n  link: DataLink;\n  data: DataFrame[];\n  onChange: (index: number, link: DataLink) => void;\n  onEdit: () => void;\n  onRemove: () => void;\n  isEditing?: boolean;\n  itemKey: string;\n}\n\nexport const DataLinksListItem = ({ link, onEdit, onRemove, index, itemKey }: DataLinksListItemProps) => {\n  const styles = useStyles2(getDataLinkListItemStyles);\n  const { title = '', url = '' } = link;\n\n  const hasTitle = title.trim() !== '';\n  const hasUrl = url.trim() !== '';\n\n  const isCompactExploreUrl = isCompactUrl(url);\n\n  return (\n    <Draggable key={itemKey} draggableId={itemKey} index={index}>\n      {(provided) => (\n        <>\n          <div\n            className={cx(styles.wrapper, styles.dragRow)}\n            ref={provided.innerRef}\n            {...provided.draggableProps}\n            key={index}\n          >\n            <div className={styles.linkDetails}>\n              <div className={cx(styles.url, !hasUrl && styles.notConfigured, isCompactExploreUrl && styles.errored)}>\n                {hasTitle ? title : 'Data link title not provided'}\n              </div>\n              <div\n                className={cx(styles.url, !hasUrl && styles.notConfigured, isCompactExploreUrl && styles.errored)}\n                title={url}\n              >\n                {hasUrl ? url : 'Data link url not provided'}\n              </div>\n              {isCompactExploreUrl && (\n                <FieldValidationMessage>\n                  Explore data link may not work in the future. Please edit.\n                </FieldValidationMessage>\n              )}\n            </div>\n            <div className={styles.icons}>\n              <IconButton name=\"pen\" onClick={onEdit} className={styles.icon} tooltip=\"Edit data link\" />\n              <IconButton name=\"trash-alt\" onClick={onRemove} className={styles.icon} tooltip=\"Remove data link\" />\n              <div className={styles.dragIcon} {...provided.dragHandleProps}>\n                <Icon name=\"draggabledots\" size=\"lg\" />\n              </div>\n            </div>\n          </div>\n        </>\n      )}\n    </Draggable>\n  );\n};\n\nconst getDataLinkListItemStyles = (theme: GrafanaTheme2) => {\n  return {\n    wrapper: css({\n      display: 'flex',\n      flexGrow: 1,\n      alignItems: 'center',\n      justifyContent: 'space-between',\n      width: '100%',\n      padding: '5px 0 5px 10px',\n      borderRadius: theme.shape.radius.default,\n      background: theme.colors.background.secondary,\n      gap: 8,\n    }),\n    linkDetails: css({\n      display: 'flex',\n      flexDirection: 'column',\n      flexGrow: 1,\n      maxWidth: `calc(100% - 100px)`,\n    }),\n    errored: css({\n      color: theme.colors.error.text,\n      fontStyle: 'italic',\n    }),\n    notConfigured: css({\n      fontStyle: 'italic',\n    }),\n    title: css({\n      color: theme.colors.text.primary,\n      fontSize: theme.typography.size.sm,\n      fontWeight: theme.typography.fontWeightMedium,\n    }),\n    url: css({\n      color: theme.colors.text.secondary,\n      fontSize: theme.typography.size.sm,\n      whiteSpace: 'nowrap',\n      overflow: 'hidden',\n      textOverflow: 'ellipsis',\n    }),\n    dragRow: css({\n      position: 'relative',\n    }),\n    icons: css({\n      display: 'flex',\n      padding: 6,\n      alignItems: 'center',\n      gap: 8,\n    }),\n    dragIcon: css({\n      cursor: 'grab',\n      color: theme.colors.text.secondary,\n      margin: theme.spacing(0, 0.5),\n    }),\n    icon: css({\n      color: theme.colors.text.secondary,\n    }),\n  };\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsBa,MAAA,iBAAA,GAAoB,CAAC,EAAE,IAAA,EAAM,QAAQ,QAAU,EAAA,KAAA,EAAO,SAAsC,KAAA;AACvG,EAAM,MAAA,MAAA,GAAS,WAAW,yBAAyB,CAAA,CAAA;AACnD,EAAA,MAAM,EAAE,KAAA,GAAQ,EAAI,EAAA,GAAA,GAAM,IAAO,GAAA,IAAA,CAAA;AAEjC,EAAM,MAAA,QAAA,GAAW,KAAM,CAAA,IAAA,EAAW,KAAA,EAAA,CAAA;AAClC,EAAM,MAAA,MAAA,GAAS,GAAI,CAAA,IAAA,EAAW,KAAA,EAAA,CAAA;AAE9B,EAAM,MAAA,mBAAA,GAAsB,aAAa,GAAG,CAAA,CAAA;AAE5C,EAAA,2BACG,SAAwB,EAAA,EAAA,WAAA,EAAa,SAAS,KAC5C,EAAA,QAAA,EAAA,CAAC,6BAEE,GAAA,CAAA,QAAA,EAAA,EAAA,QAAA,kBAAA,aAAA;AAAA,IAAC,KAAA;AAAA,IAAA,aAAA,CAAA,cAAA,CAAA;AAAA,MACC,SAAW,EAAA,EAAA,CAAG,MAAO,CAAA,OAAA,EAAS,OAAO,OAAO,CAAA;AAAA,MAC5C,KAAK,QAAS,CAAA,QAAA;AAAA,KAAA,EACV,SAAS,cAHd,CAAA,EAAA;AAAA,MAIC,GAAK,EAAA,KAAA;AAAA,KAAA,CAAA;AAAA,oBAEJ,IAAA,CAAA,KAAA,EAAA,EAAI,SAAW,EAAA,MAAA,CAAO,WACrB,EAAA,QAAA,EAAA;AAAA,sBAAA,GAAA,CAAC,KAAI,EAAA,EAAA,SAAA,EAAW,EAAG,CAAA,MAAA,CAAO,KAAK,CAAC,MAAA,IAAU,MAAO,CAAA,aAAA,EAAe,uBAAuB,MAAO,CAAA,OAAO,CAClG,EAAA,QAAA,EAAA,QAAA,GAAW,QAAQ,8BACtB,EAAA,CAAA;AAAA,sBACA,GAAA;AAAA,QAAC,KAAA;AAAA,QAAA;AAAA,UACC,SAAA,EAAW,EAAG,CAAA,MAAA,CAAO,GAAK,EAAA,CAAC,UAAU,MAAO,CAAA,aAAA,EAAe,mBAAuB,IAAA,MAAA,CAAO,OAAO,CAAA;AAAA,UAChG,KAAO,EAAA,GAAA;AAAA,UAEN,mBAAS,GAAM,GAAA,4BAAA;AAAA,SAAA;AAAA,OAClB;AAAA,MACC,mBAAA,oBACE,GAAA,CAAA,sBAAA,EAAA,EAAuB,QAExB,EAAA,4DAAA,EAAA,CAAA;AAAA,KAEJ,EAAA,CAAA;AAAA,oBACC,IAAA,CAAA,KAAA,EAAA,EAAI,SAAW,EAAA,MAAA,CAAO,KACrB,EAAA,QAAA,EAAA;AAAA,sBAAC,GAAA,CAAA,UAAA,EAAA,EAAW,MAAK,KAAM,EAAA,OAAA,EAAS,QAAQ,SAAW,EAAA,MAAA,CAAO,IAAM,EAAA,OAAA,EAAQ,gBAAiB,EAAA,CAAA;AAAA,sBACzF,GAAA,CAAC,UAAW,EAAA,EAAA,IAAA,EAAK,WAAY,EAAA,OAAA,EAAS,UAAU,SAAW,EAAA,MAAA,CAAO,IAAM,EAAA,OAAA,EAAQ,kBAAmB,EAAA,CAAA;AAAA,sBAClG,GAAA,CAAA,KAAA,EAAA,aAAA,CAAA,cAAA,CAAA,EAAI,SAAW,EAAA,MAAA,CAAO,YAAc,QAAS,CAAA,eAAA,CAAA,EAA7C,EACC,QAAA,kBAAA,GAAA,CAAC,IAAK,EAAA,EAAA,IAAA,EAAK,eAAgB,EAAA,IAAA,EAAK,MAAK,CACvC,EAAA,CAAA,CAAA;AAAA,KACF,EAAA,CAAA;AAAA,GACF,EACF,KAjCY,OAmChB,CAAA,CAAA;AAEJ,EAAA;AAEA,MAAM,yBAAA,GAA4B,CAAC,KAAyB,KAAA;AAC1D,EAAO,OAAA;AAAA,IACL,SAAS,GAAI,CAAA;AAAA,MACX,OAAS,EAAA,MAAA;AAAA,MACT,QAAU,EAAA,CAAA;AAAA,MACV,UAAY,EAAA,QAAA;AAAA,MACZ,cAAgB,EAAA,eAAA;AAAA,MAChB,KAAO,EAAA,MAAA;AAAA,MACP,OAAS,EAAA,gBAAA;AAAA,MACT,YAAA,EAAc,KAAM,CAAA,KAAA,CAAM,MAAO,CAAA,OAAA;AAAA,MACjC,UAAA,EAAY,KAAM,CAAA,MAAA,CAAO,UAAW,CAAA,SAAA;AAAA,MACpC,GAAK,EAAA,CAAA;AAAA,KACN,CAAA;AAAA,IACD,aAAa,GAAI,CAAA;AAAA,MACf,OAAS,EAAA,MAAA;AAAA,MACT,aAAe,EAAA,QAAA;AAAA,MACf,QAAU,EAAA,CAAA;AAAA,MACV,QAAU,EAAA,CAAA,kBAAA,CAAA;AAAA,KACX,CAAA;AAAA,IACD,SAAS,GAAI,CAAA;AAAA,MACX,KAAA,EAAO,KAAM,CAAA,MAAA,CAAO,KAAM,CAAA,IAAA;AAAA,MAC1B,SAAW,EAAA,QAAA;AAAA,KACZ,CAAA;AAAA,IACD,eAAe,GAAI,CAAA;AAAA,MACjB,SAAW,EAAA,QAAA;AAAA,KACZ,CAAA;AAAA,IACD,OAAO,GAAI,CAAA;AAAA,MACT,KAAA,EAAO,KAAM,CAAA,MAAA,CAAO,IAAK,CAAA,OAAA;AAAA,MACzB,QAAA,EAAU,KAAM,CAAA,UAAA,CAAW,IAAK,CAAA,EAAA;AAAA,MAChC,UAAA,EAAY,MAAM,UAAW,CAAA,gBAAA;AAAA,KAC9B,CAAA;AAAA,IACD,KAAK,GAAI,CAAA;AAAA,MACP,KAAA,EAAO,KAAM,CAAA,MAAA,CAAO,IAAK,CAAA,SAAA;AAAA,MACzB,QAAA,EAAU,KAAM,CAAA,UAAA,CAAW,IAAK,CAAA,EAAA;AAAA,MAChC,UAAY,EAAA,QAAA;AAAA,MACZ,QAAU,EAAA,QAAA;AAAA,MACV,YAAc,EAAA,UAAA;AAAA,KACf,CAAA;AAAA,IACD,SAAS,GAAI,CAAA;AAAA,MACX,QAAU,EAAA,UAAA;AAAA,KACX,CAAA;AAAA,IACD,OAAO,GAAI,CAAA;AAAA,MACT,OAAS,EAAA,MAAA;AAAA,MACT,OAAS,EAAA,CAAA;AAAA,MACT,UAAY,EAAA,QAAA;AAAA,MACZ,GAAK,EAAA,CAAA;AAAA,KACN,CAAA;AAAA,IACD,UAAU,GAAI,CAAA;AAAA,MACZ,MAAQ,EAAA,MAAA;AAAA,MACR,KAAA,EAAO,KAAM,CAAA,MAAA,CAAO,IAAK,CAAA,SAAA;AAAA,MACzB,MAAQ,EAAA,KAAA,CAAM,OAAQ,CAAA,CAAA,EAAG,GAAG,CAAA;AAAA,KAC7B,CAAA;AAAA,IACD,MAAM,GAAI,CAAA;AAAA,MACR,KAAA,EAAO,KAAM,CAAA,MAAA,CAAO,IAAK,CAAA,SAAA;AAAA,KAC1B,CAAA;AAAA,GACH,CAAA;AACF,CAAA;;;;"}