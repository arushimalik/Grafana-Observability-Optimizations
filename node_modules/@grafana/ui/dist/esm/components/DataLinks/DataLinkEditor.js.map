{"version":3,"file":"DataLinkEditor.js","sources":["../../../../src/components/DataLinks/DataLinkEditor.tsx"],"sourcesContent":["import { css } from '@emotion/css';\nimport { memo, ChangeEvent } from 'react';\n\nimport { VariableSuggestion, GrafanaTheme2, DataLink } from '@grafana/data';\n\nimport { useStyles2 } from '../../themes/index';\nimport { isCompactUrl } from '../../utils/dataLinks';\nimport { Field } from '../Forms/Field';\nimport { Input } from '../Input/Input';\nimport { Switch } from '../Switch/Switch';\n\nimport { DataLinkInput } from './DataLinkInput';\n\ninterface DataLinkEditorProps {\n  index: number;\n  isLast: boolean;\n  value: DataLink;\n  suggestions: VariableSuggestion[];\n  onChange: (index: number, link: DataLink, callback?: () => void) => void;\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  listItem: css({\n    marginBottom: theme.spacing(),\n  }),\n  infoText: css({\n    paddingBottom: theme.spacing(2),\n    marginLeft: '66px',\n    color: theme.colors.text.secondary,\n  }),\n});\n\nexport const DataLinkEditor = memo(({ index, value, onChange, suggestions, isLast }: DataLinkEditorProps) => {\n  const styles = useStyles2(getStyles);\n\n  const onUrlChange = (url: string, callback?: () => void) => {\n    onChange(index, { ...value, url }, callback);\n  };\n  const onTitleChange = (event: ChangeEvent<HTMLInputElement>) => {\n    onChange(index, { ...value, title: event.target.value });\n  };\n\n  const onOpenInNewTabChanged = () => {\n    onChange(index, { ...value, targetBlank: !value.targetBlank });\n  };\n\n  return (\n    <div className={styles.listItem}>\n      <Field label=\"Title\">\n        <Input value={value.title} onChange={onTitleChange} placeholder=\"Show details\" />\n      </Field>\n\n      <Field\n        label=\"URL\"\n        invalid={isCompactUrl(value.url)}\n        error=\"Data link is an Explore URL in a deprecated format. Please visit the URL to be redirected, and edit this data link to use that URL.\"\n      >\n        <DataLinkInput value={value.url} onChange={onUrlChange} suggestions={suggestions} />\n      </Field>\n\n      <Field label=\"Open in new tab\">\n        <Switch value={value.targetBlank || false} onChange={onOpenInNewTabChanged} />\n      </Field>\n\n      {isLast && (\n        <div className={styles.infoText}>\n          With data links you can reference data variables like series name, labels and values. Type CMD+Space,\n          CTRL+Space, or $ to open variable suggestions.\n        </div>\n      )}\n    </div>\n  );\n});\n\nDataLinkEditor.displayName = 'DataLinkEditor';\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqBA,MAAM,SAAA,GAAY,CAAC,KAA0B,MAAA;AAAA,EAC3C,UAAU,GAAI,CAAA;AAAA,IACZ,YAAA,EAAc,MAAM,OAAQ,EAAA;AAAA,GAC7B,CAAA;AAAA,EACD,UAAU,GAAI,CAAA;AAAA,IACZ,aAAA,EAAe,KAAM,CAAA,OAAA,CAAQ,CAAC,CAAA;AAAA,IAC9B,UAAY,EAAA,MAAA;AAAA,IACZ,KAAA,EAAO,KAAM,CAAA,MAAA,CAAO,IAAK,CAAA,SAAA;AAAA,GAC1B,CAAA;AACH,CAAA,CAAA,CAAA;AAEa,MAAA,cAAA,GAAiB,KAAK,CAAC,EAAE,OAAO,KAAO,EAAA,QAAA,EAAU,WAAa,EAAA,MAAA,EAAkC,KAAA;AAC3G,EAAM,MAAA,MAAA,GAAS,WAAW,SAAS,CAAA,CAAA;AAEnC,EAAM,MAAA,WAAA,GAAc,CAAC,GAAA,EAAa,QAA0B,KAAA;AAC1D,IAAA,QAAA,CAAS,OAAO,aAAK,CAAA,cAAA,CAAA,EAAA,EAAA,KAAA,CAAA,EAAL,EAAY,GAAA,KAAO,QAAQ,CAAA,CAAA;AAAA,GAC7C,CAAA;AACA,EAAM,MAAA,aAAA,GAAgB,CAAC,KAAyC,KAAA;AAC9D,IAAS,QAAA,CAAA,KAAA,EAAO,iCAAK,KAAL,CAAA,EAAA,EAAY,OAAO,KAAM,CAAA,MAAA,CAAO,OAAO,CAAA,CAAA,CAAA;AAAA,GACzD,CAAA;AAEA,EAAA,MAAM,wBAAwB,MAAM;AAClC,IAAS,QAAA,CAAA,KAAA,EAAO,iCAAK,KAAL,CAAA,EAAA,EAAY,aAAa,CAAC,KAAA,CAAM,aAAa,CAAA,CAAA,CAAA;AAAA,GAC/D,CAAA;AAEA,EAAA,uBACG,IAAA,CAAA,KAAA,EAAA,EAAI,SAAW,EAAA,MAAA,CAAO,QACrB,EAAA,QAAA,EAAA;AAAA,oBAAA,GAAA,CAAC,KAAM,EAAA,EAAA,KAAA,EAAM,OACX,EAAA,QAAA,kBAAA,GAAA,CAAC,KAAM,EAAA,EAAA,KAAA,EAAO,KAAM,CAAA,KAAA,EAAO,QAAU,EAAA,aAAA,EAAe,WAAY,EAAA,cAAA,EAAe,CACjF,EAAA,CAAA;AAAA,oBAEA,GAAA;AAAA,MAAC,KAAA;AAAA,MAAA;AAAA,QACC,KAAM,EAAA,KAAA;AAAA,QACN,OAAA,EAAS,YAAa,CAAA,KAAA,CAAM,GAAG,CAAA;AAAA,QAC/B,KAAM,EAAA,qIAAA;AAAA,QAEN,8BAAC,aAAc,EAAA,EAAA,KAAA,EAAO,MAAM,GAAK,EAAA,QAAA,EAAU,aAAa,WAA0B,EAAA,CAAA;AAAA,OAAA;AAAA,KACpF;AAAA,oBAEC,GAAA,CAAA,KAAA,EAAA,EAAM,KAAM,EAAA,iBAAA,EACX,QAAC,kBAAA,GAAA,CAAA,MAAA,EAAA,EAAO,KAAO,EAAA,KAAA,CAAM,WAAe,IAAA,KAAA,EAAO,QAAU,EAAA,qBAAA,EAAuB,CAC9E,EAAA,CAAA;AAAA,IAEC,0BACE,GAAA,CAAA,KAAA,EAAA,EAAI,SAAW,EAAA,MAAA,CAAO,UAAU,QAGjC,EAAA,sJAAA,EAAA,CAAA;AAAA,GAEJ,EAAA,CAAA,CAAA;AAEJ,CAAC,EAAA;AAED,cAAA,CAAe,WAAc,GAAA,gBAAA;;;;"}