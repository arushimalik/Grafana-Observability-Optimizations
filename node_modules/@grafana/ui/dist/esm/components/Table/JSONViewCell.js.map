{"version":3,"file":"JSONViewCell.js","sources":["../../../../src/components/Table/JSONViewCell.tsx"],"sourcesContent":["import { css, cx } from '@emotion/css';\nimport { isString } from 'lodash';\n\nimport { useStyles2 } from '../../themes';\nimport { getCellLinks } from '../../utils';\nimport { Button, clearLinkButtonStyles } from '../Button';\nimport { DataLinksContextMenu } from '../DataLinks/DataLinksContextMenu';\n\nimport { CellActions } from './CellActions';\nimport { TableCellProps } from './types';\n\nexport function JSONViewCell(props: TableCellProps): JSX.Element {\n  const { cell, tableStyles, cellProps, field, row } = props;\n  const inspectEnabled = Boolean(field.config.custom?.inspect);\n  const txt = css({\n    cursor: 'pointer',\n    fontFamily: 'monospace',\n  });\n\n  let value = cell.value;\n  let displayValue = value;\n\n  if (isString(value)) {\n    try {\n      value = JSON.parse(value);\n    } catch {} // ignore errors\n  } else {\n    displayValue = JSON.stringify(value, null, ' ');\n  }\n\n  const hasLinks = Boolean(getCellLinks(field, row)?.length);\n  const clearButtonStyle = useStyles2(clearLinkButtonStyles);\n\n  return (\n    <div {...cellProps} className={inspectEnabled ? tableStyles.cellContainerNoOverflow : tableStyles.cellContainer}>\n      <div className={cx(tableStyles.cellText, txt)}>\n        {!hasLinks && <div className={tableStyles.cellText}>{displayValue}</div>}\n        {hasLinks && (\n          <DataLinksContextMenu links={() => getCellLinks(field, row) || []}>\n            {(api) => {\n              if (api.openMenu) {\n                return (\n                  <Button className={cx(clearButtonStyle)} onClick={api.openMenu}>\n                    {displayValue}\n                  </Button>\n                );\n              } else {\n                return <>{displayValue}</>;\n              }\n            }}\n          </DataLinksContextMenu>\n        )}\n      </div>\n      {inspectEnabled && <CellActions {...props} previewMode=\"code\" />}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAWO,SAAS,aAAa,KAAoC,EAAA;AAXjE,EAAA,IAAA,EAAA,EAAA,EAAA,CAAA;AAYE,EAAA,MAAM,EAAE,IAAM,EAAA,WAAA,EAAa,SAAW,EAAA,KAAA,EAAO,KAAQ,GAAA,KAAA,CAAA;AACrD,EAAA,MAAM,iBAAiB,OAAQ,CAAA,CAAA,EAAA,GAAA,KAAA,CAAM,MAAO,CAAA,MAAA,KAAb,mBAAqB,OAAO,CAAA,CAAA;AAC3D,EAAA,MAAM,MAAM,GAAI,CAAA;AAAA,IACd,MAAQ,EAAA,SAAA;AAAA,IACR,UAAY,EAAA,WAAA;AAAA,GACb,CAAA,CAAA;AAED,EAAA,IAAI,QAAQ,IAAK,CAAA,KAAA,CAAA;AACjB,EAAA,IAAI,YAAe,GAAA,KAAA,CAAA;AAEnB,EAAI,IAAA,QAAA,CAAS,KAAK,CAAG,EAAA;AACnB,IAAI,IAAA;AACF,MAAQ,KAAA,GAAA,IAAA,CAAK,MAAM,KAAK,CAAA,CAAA;AAAA,KAClB,CAAA,OAAA,CAAA,EAAA;AAAA,KAAC;AAAA,GACJ,MAAA;AACL,IAAA,YAAA,GAAe,IAAK,CAAA,SAAA,CAAU,KAAO,EAAA,IAAA,EAAM,GAAG,CAAA,CAAA;AAAA,GAChD;AAEA,EAAA,MAAM,WAAW,OAAQ,CAAA,CAAA,EAAA,GAAA,YAAA,CAAa,OAAO,GAAG,CAAA,KAAvB,mBAA0B,MAAM,CAAA,CAAA;AACzD,EAAM,MAAA,gBAAA,GAAmB,WAAW,qBAAqB,CAAA,CAAA;AAEzD,EACE,uBAAA,IAAA,CAAC,wCAAQ,SAAR,CAAA,EAAA,EAAmB,WAAW,cAAiB,GAAA,WAAA,CAAY,uBAA0B,GAAA,WAAA,CAAY,aAChG,EAAA,QAAA,EAAA;AAAA,oBAAA,IAAA,CAAC,SAAI,SAAW,EAAA,EAAA,CAAG,WAAY,CAAA,QAAA,EAAU,GAAG,CACzC,EAAA,QAAA,EAAA;AAAA,MAAA,CAAC,4BAAa,GAAA,CAAA,KAAA,EAAA,EAAI,SAAW,EAAA,WAAA,CAAY,UAAW,QAAa,EAAA,YAAA,EAAA,CAAA;AAAA,MACjE,QACC,oBAAA,GAAA,CAAC,oBAAqB,EAAA,EAAA,KAAA,EAAO,MAAM,YAAA,CAAa,KAAO,EAAA,GAAG,CAAK,IAAA,EAC5D,EAAA,QAAA,EAAA,CAAC,GAAQ,KAAA;AACR,QAAA,IAAI,IAAI,QAAU,EAAA;AAChB,UACE,uBAAA,GAAA,CAAC,UAAO,SAAW,EAAA,EAAA,CAAG,gBAAgB,CAAG,EAAA,OAAA,EAAS,GAAI,CAAA,QAAA,EACnD,QACH,EAAA,YAAA,EAAA,CAAA,CAAA;AAAA,SAEG,MAAA;AACL,UAAA,uCAAU,QAAa,EAAA,YAAA,EAAA,CAAA,CAAA;AAAA,SACzB;AAAA,OAEJ,EAAA,CAAA;AAAA,KAEJ,EAAA,CAAA;AAAA,IACC,kCAAmB,GAAA,CAAA,WAAA,EAAA,aAAA,CAAA,cAAA,CAAA,EAAA,EAAgB,KAAhB,CAAA,EAAA,EAAuB,aAAY,MAAO,EAAA,CAAA,CAAA;AAAA,GAChE,EAAA,CAAA,CAAA,CAAA;AAEJ;;;;"}