"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const resolver_1 = require("./resolver");
const versioned_1 = require("./versioned");
const apis_1 = require("./versioned/apis");
const constants_1 = require("./versioned/constants");
let versionedSelectors = {
    components: versioned_1.versionedComponents,
    pages: versioned_1.versionedPages,
    apis: apis_1.versionedAPIs,
};
const originalVersionedSelectors = versionedSelectors;
describe('resolveSelectors', () => {
    afterEach(() => {
        versionedSelectors = originalVersionedSelectors;
    });
    test('returns the right selector value when it has multiple versions', () => {
        versionedSelectors.components.CodeEditor.container = {
            '10.2.3': 'data-testid Code editor container',
            [constants_1.MIN_GRAFANA_VERSION]: 'Code editor container',
        };
        // semver great than
        let selectors = (0, resolver_1.resolveSelectors)(versionedSelectors, '10.4.0');
        expect(selectors.components.CodeEditor.container).toBe('data-testid Code editor container');
        // semver equals to
        selectors = (0, resolver_1.resolveSelectors)(versionedSelectors, '10.3.0');
        expect(selectors.components.CodeEditor.container).toBe('data-testid Code editor container');
        // semver equals to when using pre-release
        selectors = (0, resolver_1.resolveSelectors)(versionedSelectors, '10.3.0-pre');
        expect(selectors.components.CodeEditor.container).toBe('data-testid Code editor container');
        selectors = (0, resolver_1.resolveSelectors)(versionedSelectors, '9.2.0');
        expect(selectors.components.CodeEditor.container).toBe('Code editor container');
    });
});
