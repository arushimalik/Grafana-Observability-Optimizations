"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createDataSourceConfigPage = void 0;
const createDataSource_1 = require("./createDataSource");
const DataSourceConfigPage_1 = require("../../models/pages/DataSourceConfigPage");
const createDataSourceConfigPage = async ({ request, page, selectors, grafanaVersion }, use, testInfo) => {
    let datasourceConfigPage;
    let deleteDataSource = true;
    await use(async (args) => {
        deleteDataSource = args.deleteDataSourceAfterTest ?? true;
        const datasource = await (0, createDataSource_1.createDataSourceViaAPI)(request, args);
        datasourceConfigPage = new DataSourceConfigPage_1.DataSourceConfigPage({ page, selectors, grafanaVersion, request, testInfo }, datasource);
        await datasourceConfigPage.goto();
        return datasourceConfigPage;
    });
    deleteDataSource && (await datasourceConfigPage?.deleteDataSource());
};
exports.createDataSourceConfigPage = createDataSourceConfigPage;
